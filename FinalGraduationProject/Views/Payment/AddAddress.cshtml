@model FinalGraduationProject.Models.Address

@{
    ViewData["Title"] = "Add Address";
}

<link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet" />
<style>
    .address-card {
        max-width: 900px;
        margin: 2.5rem auto;
        border-radius: 12px;
        box-shadow: 0 8px 30px rgba(22, 28, 45, .08);
        overflow: hidden;
        background: linear-gradient(180deg, #ffffff 0%, #fbfbff 100%);
    }
    .address-hero {
        background: linear-gradient(90deg,#6f42c1 0%, #0d6efd 100%);
        color: #fff;
        padding: 2rem;
    }
    .address-hero h2 { margin-bottom: .25rem; }
    .address-hero p { opacity: .95; margin-bottom: 0; }
    .form-section { padding: 1.75rem; }
    .form-row { gap: 1rem; }
    .btn-primary {
        background: linear-gradient(90deg,#4f46e5,#0d6efd);
        border: none;
        box-shadow: 0 6px 18px rgba(13,110,253,.12);
    }
    .small-help { font-size: .875rem; color: #6b7280; }
   
</style>

<h2 class="mt-5">Add Shipping Address</h2>

<div class="address-card animate__animated animate__fadeInUp">
    <div class="row g-0">
        <div class="col-md-5 address-hero d-flex flex-column justify-content-center p-4">
            <div>
                <h2 class="h4">Add a new address</h2>
                <p class="mb-0">Save an address for faster checkout and accurate shipping.</p>
            </div>
            <div class="mt-3 small-help">
                Tip: Keep your street and postal code accurate for fast delivery.
            </div>
        </div>

        <div class="col-md-7 form-section">
            <form asp-action="ProcessPayment" method="post">
                <input type="hidden" name="orderId" value="@ViewBag.OrderId" />
                <input type="hidden" name="paymentMethod" value="@ViewBag.PaymentMethod" />

                <div class="row form-row">
                    <div class="col-12 mb-3">
                        <label asp-for="Street" class="form-label"></label>
                        <input asp-for="Street" class="form-control" placeholder="123 Main St, Apt 4B" />
                    </div>

                    <div class="col-md-6 mb-3">
                        <label asp-for="City" class="form-label"></label>
                        <input asp-for="City" class="form-control" placeholder="e.g. Seattle" />
                    </div>

                    <div class="col-md-6 mb-3">
                        <label asp-for="State" class="form-label"></label>
                        <input asp-for="State" class="form-control" placeholder="e.g. WA" />
                    </div>

                    <div class="col-md-6 mb-3">
                        <label asp-for="PostalCode" class="form-label"></label>
                        <input asp-for="PostalCode" class="form-control" placeholder="ZIP or postal code" />
                    </div>

                    <div class="col-md-6 mb-3">
                        <label asp-for="Country" class="form-label"></label>
                        <input asp-for="Country" class="form-control" placeholder="e.g. United States" />
                    </div>
                </div>

                <div class="d-flex justify-content-between align-items-center mt-4">
                    <a asp-page="/Addresses/Index" class="btn btn-light">Cancel</a>
                    <button type="submit" class="btn btn-primary px-4">
                        Continue to Order Success
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        // Basic client validation enhancement
        (function () {
            'use strict';
            const forms = document.querySelectorAll('.needs-validation');
            Array.from(forms).forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        })();
    </script>
}
